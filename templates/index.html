<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì T√ºrk√ße Tez √ñzetleyici</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #5a67d8;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .drop-zone {
            border: 3px dashed #cbd5e0;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .drop-zone:hover, .drop-zone.dragover {
            border-color: #5a67d8;
            background-color: #f7fafc;
        }
        
        .drop-zone.dragover {
            background-color: #e6fffa;
            border-color: #38b2ac;
        }
        
        .file-input {
            display: none;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .textarea:focus {
            outline: none;
            border-color: #5a67d8;
        }
        
        .result-section {
            margin-top: 30px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }
        
        .result-section.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #5a67d8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #5a67d8;
        }
        
        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .keyword {
            background: #e6fffa;
            color: #234e52;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #81e6d9;
        }
        
        /* Y√ñK TEZ ARAMA STƒ∞LLERƒ∞ */
        .yok-search-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            color: white;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .yok-search-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: bold;
        }
        
        .yok-search-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .yok-search-input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1em;
            backdrop-filter: blur(10px);
        }
        
        .yok-search-input::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .yok-search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
        }
        
        .yok-select {
            padding: 12px 15px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1em;
            backdrop-filter: blur(10px);
            min-width: 120px;
        }
        
        .yok-select option {
            background: #667eea;
            color: white;
        }
        
        .yok-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .yok-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .yok-btn-secondary {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            border: none;
        }
        
        .yok-btn-secondary:hover {
            transform: scale(1.05);
        }
        
        .yok-results {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .yok-results h3 {
            color: #667eea;
            margin-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        
        .tez-item {
            transition: all 0.3s ease;
        }
        
        .tez-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Geli≈ümi≈ü Arama Modal Stilleri */
        .yok-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }
        
        .yok-modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .yok-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .yok-modal-title {
            color: #667eea;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .yok-close {
            color: #999;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .yok-close:hover {
            color: #667eea;
        }
        
        .yok-form-group {
            margin-bottom: 20px;
        }
        
        .yok-form-label {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 600;
        }
        
        .yok-form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .yok-form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .yok-form-row {
            display: flex;
            gap: 15px;
        }
        
        .yok-form-row .yok-form-group {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .yok-search-row {
                flex-direction: column;
            }
            
            .yok-modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
            
            .yok-form-row {
                flex-direction: column;
            }
        }
        
        .export-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }
        
        .alert.success {
            background: #f0fff4;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        
        .alert.error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }
        
        .alert.show {
            display: block;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì T√ºrk√ße Tez √ñzetleyici</h1>
            <p>PDF dosyalarƒ±nƒ±zƒ± y√ºkleyin ve anƒ±nda T√ºrk√ße √∂zetlerini alƒ±n!</p>
        </div>
        
        <div class="main-content">
            <!-- PDF Y√ºkleme B√∂l√ºm√º -->
            <div class="card">
                <h2>üìÑ PDF Dosyasƒ± Y√ºkle</h2>
                <div class="drop-zone" id="dropZone">
                    <div style="font-size: 3rem; margin-bottom: 15px;">üìÅ</div>
                    <p><strong>PDF dosyanƒ±zƒ± buraya s√ºr√ºkleyin</strong></p>
                    <p>veya</p>
                    <button class="btn" onclick="document.getElementById('fileInput').click()">
                        Dosya Se√ß
                    </button>
                    <input type="file" id="fileInput" class="file-input" accept=".pdf">
                </div>
                
                <div id="fileInfo" style="display: none;">
                    <p><strong>Se√ßilen dosya:</strong> <span id="fileName"></span></p>
                    <p><strong>Boyut:</strong> <span id="fileSize"></span></p>
                    <button class="btn" id="uploadBtn">üì§ Y√ºkle ve √ñzetle</button>
                </div>
            </div>
            
            <!-- Metin √ñzetleme B√∂l√ºm√º -->
            <div class="card">
                <h2>üìù Metin √ñzetleme</h2>
                <textarea class="textarea" id="textInput" placeholder="√ñzetlemek istediƒüiniz T√ºrk√ße metni buraya yazƒ±n..."></textarea>
                <button class="btn" id="summarizeBtn">‚ú® √ñzetle</button>
                <button class="btn" id="clearBtn" style="background: #e53e3e;">üóëÔ∏è Temizle</button>
            </div>
        </div>
        
        <!-- Y√ñK Tez Arama B√∂l√ºm√º -->
        <div class="card" style="margin-top: 30px;">
            <h2>üîç Y√ñK Tez Arama</h2>
            <p style="color: #666; margin-bottom: 20px;">Y√ñK Tez Merkezi'nden tez arayƒ±n ve √∂zetleyin!</p>
            
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; margin-bottom: 15px;">
                <input type="text" id="yokSearchInput" class="textarea" style="height: 50px; padding: 15px;" placeholder="Anahtar kelime girin (√∂rn: makine √∂ƒürenmesi, yapay zeka...)">
                <select id="yokTezTuru" style="padding: 15px; border-radius: 8px; border: 2px solid #e2e8f0;">
                    <option value="tum">T√ºm Tezler</option>
                    <option value="yuksek_lisans">Y√ºksek Lisans</option>
                    <option value="doktora">Doktora</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="btn" id="yokSearchBtn">üîç Y√ñK Tez'de Ara</button>
                <button class="btn" id="yokAdvancedBtn" style="background: #805ad5;">‚öôÔ∏è Geli≈ümi≈ü Arama</button>
            </div>
            
            <!-- Y√ñK Arama Sonu√ßlarƒ± -->
            <div id="yokResults" style="display: none; margin-top: 20px;">
                <h3>üìã Bulunan Tezler:</h3>
                <div id="yokTezList"></div>
                <div style="margin-top: 15px;">
                    <button class="btn" id="yokAnalyzeBtn" style="background: #38a169;">üìä Se√ßili Tezi Analiz Et</button>
                </div>
            </div>
        </div>
        
        <!-- Geli≈ümi≈ü Y√ñK Arama Modal -->
        <div id="yokAdvancedModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 600px; max-height: 80%; overflow-y: auto;">
                <h3>‚öôÔ∏è Y√ñK Tez Geli≈ümi≈ü Arama</h3>
                <div style="display: grid; gap: 15px; margin: 20px 0;">
                    <div>
                        <label>Tez Ba≈ülƒ±ƒüƒ±:</label>
                        <input type="text" id="yokBaslik" class="textarea" style="height: 40px;" placeholder="Tez ba≈ülƒ±ƒüƒ±nda aranacak kelimeler">
                    </div>
                    <div>
                        <label>Yazar Adƒ±:</label>
                        <input type="text" id="yokYazar" class="textarea" style="height: 40px;" placeholder="Yazar adƒ±">
                    </div>
                    <div>
                        <label>√úniversite:</label>
                        <input type="text" id="yokUniversite" class="textarea" style="height: 40px;" placeholder="√úniversite adƒ±">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label>Ba≈ülangƒ±√ß Yƒ±lƒ±:</label>
                            <input type="number" id="yokYilBaslangic" class="textarea" style="height: 40px;" placeholder="2020" min="1990" max="2024">
                        </div>
                        <div>
                            <label>Biti≈ü Yƒ±lƒ±:</label>
                            <input type="number" id="yokYilBitis" class="textarea" style="height: 40px;" placeholder="2024" min="1990" max="2024">
                        </div>
                    </div>
                    <div>
                        <label>Tez T√ºr√º:</label>
                        <select id="yokGelismisTur" style="width: 100%; padding: 15px; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <option value="">Se√ßiniz</option>
                            <option value="YL">Y√ºksek Lisans</option>
                            <option value="DR">Doktora</option>
                        </select>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button class="btn" id="performAdvancedSearch">üîç Geli≈ümi≈ü Arama Yap</button>
                    <button class="btn" id="closeAdvancedSearch" style="background: #e53e3e;">‚ùå Kapat</button>
                </div>
            </div>
        </div>
        
        <!-- Y√ºkleme Animasyonu -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>ƒ∞≈üleniyor... L√ºtfen bekleyin.</p>
        </div>
        
        <!-- Uyarƒ± Mesajlarƒ± -->
        <div class="alert" id="alert">
            <span id="alertMessage"></span>
        </div>
        
        <!-- Sonu√ß B√∂l√ºm√º -->
        <div class="result-section" id="resultSection">
            <h2>üìä √ñzetleme Sonu√ßlarƒ±</h2>
            
            <!-- ƒ∞statistikler -->
            <div class="stats" id="stats">
                <div class="stat-item">
                    <div class="stat-value" id="originalLength">-</div>
                    <div>Orijinal Uzunluk</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="summaryLength">-</div>
                    <div>√ñzet Uzunluk</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="compressionRatio">-</div>
                    <div>Sƒ±kƒ±≈ütƒ±rma Oranƒ±</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="wordCount">-</div>
                    <div>Kelime Sayƒ±sƒ±</div>
                </div>
            </div>
            
            <!-- √ñzet -->
            <div style="margin: 20px 0;">
                <h3>üìã √ñzet:</h3>
                <div id="summaryText" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px; line-height: 1.6;"></div>
            </div>
            
            <!-- Anahtar Kelimeler -->
            <div style="margin: 20px 0;">
                <h3>üîë Anahtar Kelimeler:</h3>
                <div class="keywords" id="keywords"></div>
            </div>
            
            <!-- Export Butonlarƒ± -->
            <div class="export-buttons">
                <button class="btn export-btn" id="exportTxt">üìÑ TXT ƒ∞ndir</button>
                <button class="btn export-btn" id="exportJson">ÔøΩ JSON ƒ∞ndir</button>
                <button class="btn export-btn" id="compareBtn">üîç Kar≈üƒ±la≈ütƒ±r</button>
                <button class="btn export-btn" id="shareBtn">üîó Payla≈ü</button>
            </div>
            
            <!-- Geli≈ümi≈ü √ñzellikler -->
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <h4>ÔøΩ Geli≈ümi≈ü √ñzellikler:</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 10px;">
                    <button class="btn" id="batchProcessBtn" style="background: #38a169;">üì¶ Batch ƒ∞≈üleme</button>
                    <button class="btn" id="advancedStatsBtn" style="background: #3182ce;">üìà Detaylƒ± ƒ∞statistik</button>
                    <button class="btn" id="saveToCloudBtn" style="background: #805ad5;">‚òÅÔ∏è Bulut Kaydet</button>
                </div>
            </div>
        </div>
        
        <!-- Kar≈üƒ±la≈ütƒ±rma Modal -->
        <div id="compareModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 800px; max-height: 80%; overflow-y: auto;">
                <h3>ÔøΩ Metin Kar≈üƒ±la≈ütƒ±rma</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <label>ƒ∞lk Metin:</label>
                        <textarea id="compareText1" class="textarea" style="height: 150px;" placeholder="ƒ∞lk metni buraya yazƒ±n..."></textarea>
                    </div>
                    <div>
                        <label>ƒ∞kinci Metin:</label>
                        <textarea id="compareText2" class="textarea" style="height: 150px;" placeholder="ƒ∞kinci metni buraya yazƒ±n..."></textarea>
                    </div>
                </div>
                <div id="comparisonResult" style="margin: 20px 0; display: none;"></div>
                <div style="text-align: center;">
                    <button class="btn" id="performCompare">üîç Kar≈üƒ±la≈ütƒ±r</button>
                    <button class="btn" id="closeCompare" style="background: #e53e3e;">‚ùå Kapat</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global deƒüi≈ükenler
        let currentResult = null;
        
        // API Base URL
        const API_BASE = '';
        
        // DOM Elementleri
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const uploadBtn = document.getElementById('uploadBtn');
        const textInput = document.getElementById('textInput');
        const summarizeBtn = document.getElementById('summarizeBtn');
        const clearBtn = document.getElementById('clearBtn');
        const loading = document.getElementById('loading');
        const alert = document.getElementById('alert');
        const alertMessage = document.getElementById('alertMessage');
        const resultSection = document.getElementById('resultSection');
        
        // Drag & Drop ƒ∞≈ülemleri
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });
        
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type === 'application/pdf') {
                fileInput.files = files;
                handleFileSelect();
            } else {
                showAlert('L√ºtfen sadece PDF dosyasƒ± se√ßin!', 'error');
            }
        });
        
        fileInput.addEventListener('change', handleFileSelect);
        
        function handleFileSelect() {
            const file = fileInput.files[0];
            if (file) {
                fileName.textContent = file.name;
                fileSize.textContent = formatFileSize(file.size);
                fileInfo.style.display = 'block';
            }
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // PDF Y√ºkleme
        uploadBtn.addEventListener('click', async () => {
            const file = fileInput.files[0];
            if (!file) {
                showAlert('L√ºtfen bir PDF dosyasƒ± se√ßin!', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('dosya', file);
            
            showLoading(true);
            
            try {
                const response = await fetch('/pdf-yukle/', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result.basarili) {
                    currentResult = result;
                    displayResult(result);
                    showAlert('PDF ba≈üarƒ±yla √∂zetlendi!', 'success');
                } else {
                    showAlert(result.detail || 'Bir hata olu≈ütu!', 'error');
                }
            } catch (error) {
                showAlert('Baƒülantƒ± hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        // Metin √ñzetleme
        summarizeBtn.addEventListener('click', async () => {
            const text = textInput.value.trim();
            if (!text) {
                showAlert('L√ºtfen √∂zetlemek istediƒüiniz metni girin!', 'error');
                return;
            }
            
            if (text.length < 50) {
                showAlert('Metin en az 50 karakter olmalƒ±dƒ±r!', 'error');
                return;
            }
            
            showLoading(true);
            
            try {
                const response = await fetch('/metin-ozetle/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ metin: text })
                });
                
                const result = await response.json();
                
                if (result.basarili) {
                    currentResult = result;
                    displayResult(result);
                    showAlert('Metin ba≈üarƒ±yla √∂zetlendi!', 'success');
                } else {
                    showAlert(result.detail || 'Bir hata olu≈ütu!', 'error');
                }
            } catch (error) {
                showAlert('Baƒülantƒ± hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        // Temizle
        clearBtn.addEventListener('click', () => {
            textInput.value = '';
            resultSection.classList.remove('show');
            hideAlert();
        });
        
        // Sonu√ßlarƒ± G√∂ster
        function displayResult(result) {
            const stats = result.istatistikler;
            
            document.getElementById('originalLength').textContent = stats.orijinal_uzunluk.toLocaleString() + ' karakter';
            document.getElementById('summaryLength').textContent = stats.ozet_uzunluk.toLocaleString() + ' karakter';
            document.getElementById('compressionRatio').textContent = '%' + stats.sikistirma_orani;
            document.getElementById('wordCount').textContent = stats.kelime_sayisi.toLocaleString() + ' kelime';
            
            document.getElementById('summaryText').textContent = result.ozet;
            
            const keywordsContainer = document.getElementById('keywords');
            keywordsContainer.innerHTML = '';
            result.anahtar_kelimeler.forEach(keyword => {
                const span = document.createElement('span');
                span.className = 'keyword';
                span.textContent = keyword;
                keywordsContainer.appendChild(span);
            });
            
            resultSection.classList.add('show');
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Y√ºkleme Animasyonu
        function showLoading(show) {
            loading.style.display = show ? 'block' : 'none';
            uploadBtn.disabled = show;
            summarizeBtn.disabled = show;
        }
        
        // Uyarƒ± Mesajlarƒ±
        function showAlert(message, type) {
            alertMessage.textContent = message;
            alert.className = `alert ${type} show`;
            
            setTimeout(() => {
                hideAlert();
            }, 5000);
        }
        
        function hideAlert() {
            alert.classList.remove('show');
        }
        
        // Export ƒ∞≈ülemleri
        document.getElementById('exportTxt').addEventListener('click', async () => {
            if (!currentResult) return;
            
            try {
                const response = await fetch('/export-txt/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(currentResult)
                });
                
                if (response.ok) {
                    const blob = await response.blob();
                    downloadBlob(blob, 'tez-ozeti.txt');
                    showAlert('TXT dosyasƒ± ba≈üarƒ±yla indirildi!', 'success');
                } else {
                    showAlert('TXT dƒ±≈üarƒ± aktarma hatasƒ±!', 'error');
                }
            } catch (error) {
                showAlert('Export hatasƒ±: ' + error.message, 'error');
            }
        });
        
        document.getElementById('exportJson').addEventListener('click', async () => {
            if (!currentResult) return;
            
            try {
                const response = await fetch('/export-json/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(currentResult)
                });
                
                if (response.ok) {
                    const blob = await response.blob();
                    downloadBlob(blob, 'tez-ozeti.json');
                    showAlert('JSON dosyasƒ± ba≈üarƒ±yla indirildi!', 'success');
                } else {
                    showAlert('JSON dƒ±≈üarƒ± aktarma hatasƒ±!', 'error');
                }
            } catch (error) {
                showAlert('Dƒ±≈üarƒ± aktarma hatasƒ±: ' + error.message, 'error');
            }
        });
        
        // Geli≈ümi≈ü √ñzellikler
        document.getElementById('batchProcessBtn').addEventListener('click', async () => {
            try {
                const response = await fetch('/batch-process/');
                const info = await response.json();
                
                let message = `üì¶ Toplu ƒ∞≈üleme Bilgileri:\n\n`;
                message += `‚Ä¢ Desteklenen Bi√ßimler: ${info.desteklenen_bi√ßimler.join(', ')}\n`;
                message += `‚Ä¢ En Fazla Dosya: ${info.en_fazla_dosya_sayƒ±sƒ±}\n`;
                message += `‚Ä¢ En Fazla Boyut: ${info.en_fazla_dosya_boyutu}\n`;
                message += `‚Ä¢ Tahmini S√ºre: ${info.tahmini_i≈ülem_s√ºresi}\n\n`;
                message += `‚ö†Ô∏è Durum: ${info.durum}`;
                
                alert(message);
            } catch (error) {
                showAlert('Bilgi alƒ±namadƒ±: ' + error.message, 'error');
            }
        });
        
        document.getElementById('advancedStatsBtn').addEventListener('click', () => {
            if (!currentResult) {
                showAlert('√ñnce bir metin √∂zetleyin!', 'error');
                return;
            }
            
            const stats = currentResult.istatistikler;
            const readingTime = Math.ceil(stats.kelime_sayisi / 200); // Dakika cinsinden
            const complexity = stats.ozet_uzunluk / stats.orijinal_uzunluk;
            
            let message = `üìà Detaylƒ± ƒ∞statistikler:\n\n`;
            message += `üìñ Okuma S√ºresi: ~${readingTime} dakika\n`;
            message += `üéØ Karma≈üƒ±klƒ±k: ${complexity < 0.3 ? 'Basit' : complexity < 0.6 ? 'Orta' : 'Karma≈üƒ±k'}\n`;
            message += `üìä Sƒ±kƒ±≈ütƒ±rma Kalitesi: ${stats.sikistirma_orani > 70 ? 'M√ºkemmel' : stats.sikistirma_orani > 50 ? 'ƒ∞yi' : 'Orta'}\n`;
            message += `üî§ Ortalama Kelime Uzunluƒüu: ${(stats.ozet_uzunluk / stats.kelime_sayisi).toFixed(1)} karakter\n`;
            
            alert(message);
        });
        
        document.getElementById('saveToCloudBtn').addEventListener('click', () => {
            showAlert('Bulut kaydetme √∂zelliƒüi yakƒ±nda gelecek!', 'error');
        });
        
        // Kar≈üƒ±la≈ütƒ±rma Modal
        document.getElementById('compareBtn').addEventListener('click', () => {
            document.getElementById('compareModal').style.display = 'block';
        });
        
        document.getElementById('closeCompare').addEventListener('click', () => {
            document.getElementById('compareModal').style.display = 'none';
        });
        
        document.getElementById('performCompare').addEventListener('click', async () => {
            const text1 = document.getElementById('compareText1').value.trim();
            const text2 = document.getElementById('compareText2').value.trim();
            
            if (!text1 || !text2) {
                showAlert('ƒ∞ki metin de gereklidir!', 'error');
                return;
            }
            
            showLoading(true);
            
            try {
                const response = await fetch('/compare-texts/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ metin1: text1, metin2: text2 })
                });
                
                const result = await response.json();
                
                const resultDiv = document.getElementById('comparisonResult');
                resultDiv.innerHTML = `
                    <h4>üîç Kar≈üƒ±la≈ütƒ±rma Sonu√ßlarƒ±:</h4>
                    <div class="stats" style="margin: 15px 0;">
                        <div class="stat-item">
                            <div class="stat-value">${result.benzerlik_orani}%</div>
                            <div>Benzerlik Oranƒ±</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${result.ortak_kelime_sayisi}</div>
                            <div>Ortak Kelime</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${result.metin1_kelime_sayisi}</div>
                            <div>1. Metin Kelime</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${result.metin2_kelime_sayisi}</div>
                            <div>2. Metin Kelime</div>
                        </div>
                    </div>
                    <div>
                        <strong>Ortak Kelimeler:</strong>
                        <div class="keywords">
                            ${result.ortak_kelimeler.map(kelime => `<span class="keyword">${kelime}</span>`).join('')}
                        </div>
                    </div>
                `;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                showAlert('Kar≈üƒ±la≈ütƒ±rma hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        document.getElementById('shareBtn').addEventListener('click', () => {
            if (!currentResult) return;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Tez √ñzeti',
                    text: currentResult.ozet
                });
            } else {
                navigator.clipboard.writeText(currentResult.ozet);
                showAlert('√ñzet panoya kopyalandƒ±!', 'success');
            }
        });
        
        function downloadFile(content, filename, contentType) {
            const blob = new Blob([content], { type: contentType });
            downloadBlob(blob, filename);
        }
        
        function downloadBlob(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // Y√ñK TEZ ARAMA √ñZELLƒ∞KLERƒ∞
        
        let yokAramaSonuclari = [];
        let secilenTezIndeksi = 0;
        
        // Y√ñK Tez Basit Arama
        document.getElementById('yokSearchBtn').addEventListener('click', async () => {
            const aramaKelimesi = document.getElementById('yokSearchInput').value.trim();
            const tezTuru = document.getElementById('yokTezTuru').value;
            
            if (!aramaKelimesi) {
                showAlert('L√ºtfen anahtar kelime girin!', 'error');
                return;
            }
            
            showLoading(true);
            
            try {
                const response = await fetch(`/yok-tez-ara/?anahtar_kelime=${encodeURIComponent(aramaKelimesi)}&sayfa=1&tur=${tezTuru}`);
                const result = await response.json();
                
                if (result.basarili) {
                    yokAramaSonuclari = result.tezler || [];
                    displayYokResults(result);
                    showAlert(`${result.bulunan_tez_sayisi} tez bulundu!`, 'success');
                } else {
                    showAlert('Y√ñK Tez aramasƒ±nda hata olu≈ütu!', 'error');
                }
            } catch (error) {
                showAlert('Y√ñK Tez baƒülantƒ± hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        // Y√ñK Geli≈ümi≈ü Arama Modal
        document.getElementById('yokAdvancedBtn').addEventListener('click', () => {
            document.getElementById('yokAdvancedModal').style.display = 'block';
        });
        
        document.getElementById('closeAdvancedSearch').addEventListener('click', () => {
            document.getElementById('yokAdvancedModal').style.display = 'none';
        });
        
        // Geli≈ümi≈ü Arama
        document.getElementById('performAdvancedSearch').addEventListener('click', async () => {
            const gelismisArama = {
                baslik: document.getElementById('yokBaslik').value.trim(),
                yazar: document.getElementById('yokYazar').value.trim(),
                universite: document.getElementById('yokUniversite').value.trim(),
                yil_baslangic: document.getElementById('yokYilBaslangic').value,
                yil_bitis: document.getElementById('yokYilBitis').value,
                tur: document.getElementById('yokGelismisTur').value
            };
            
            if (!gelismisArama.baslik && !gelismisArama.yazar && !gelismisArama.universite) {
                showAlert('En az bir arama kriteri girin!', 'error');
                return;
            }
            
            showLoading(true);
            document.getElementById('yokAdvancedModal').style.display = 'none';
            
            try {
                const response = await fetch('/yok-gelismis-arama/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(gelismisArama)
                });
                
                const result = await response.json();
                
                if (result.basarili) {
                    yokAramaSonuclari = result.bulunan_tezler || [];
                    displayYokAdvancedResults(result);
                    showAlert(`Geli≈ümi≈ü arama ile ${result.toplam} tez bulundu!`, 'success');
                } else {
                    showAlert('Geli≈ümi≈ü aramada hata: ' + (result.hata || 'Bilinmeyen hata'), 'error');
                }
            } catch (error) {
                showAlert('Geli≈ümi≈ü arama hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        // Y√ñK Tez Analiz Et
        document.getElementById('yokAnalyzeBtn').addEventListener('click', async () => {
            if (yokAramaSonuclari.length === 0) {
                showAlert('√ñnce tez aramasƒ± yapƒ±n!', 'error');
                return;
            }
            
            const anahtarKelime = document.getElementById('yokSearchInput').value.trim();
            
            showLoading(true);
            
            try {
                const response = await fetch('/yok-tez-ozet/', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        anahtar_kelime: anahtarKelime,
                        tez_indeksi: secilenTezIndeksi
                    })
                });
                
                const result = await response.json();
                
                if (result.basarili) {
                    displayYokAnalysis(result);
                    showAlert('Tez analizi tamamlandƒ±!', 'success');
                } else {
                    showAlert('Tez analizi hatasƒ±!', 'error');
                }
            } catch (error) {
                showAlert('Analiz hatasƒ±: ' + error.message, 'error');
            }
            
            showLoading(false);
        });
        
        // Y√ñK Sonu√ßlarƒ± G√∂ster
        function displayYokResults(result) {
            const resultsDiv = document.getElementById('yokResults');
            const tezListDiv = document.getElementById('yokTezList');
            
            tezListDiv.innerHTML = '';
            
            if (result.tezler && result.tezler.length > 0) {
                result.tezler.forEach((tez, index) => {
                    const tezDiv = document.createElement('div');
                    tezDiv.className = 'tez-item';
                    tezDiv.style.cssText = `
                        border: 2px solid #e2e8f0;
                        border-radius: 8px;
                        padding: 15px;
                        margin: 10px 0;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        background: ${index === secilenTezIndeksi ? '#e6fffa' : 'white'};
                    `;
                    
                    tezDiv.innerHTML = `
                        <h4 style="color: #5a67d8; margin-bottom: 8px;">${tez.baslik || 'Ba≈ülƒ±k Belirtilmemi≈ü'}</h4>
                        <p><strong>Yazar:</strong> ${tez.yazar || 'Belirtilmemi≈ü'}</p>
                        <p><strong>√úniversite:</strong> ${tez.universite || 'Belirtilmemi≈ü'}</p>
                        <p><strong>T√ºr:</strong> ${tez.tur || 'Belirtilmemi≈ü'} | <strong>Yƒ±l:</strong> ${tez.yil || 'Belirtilmemi≈ü'}</p>
                        ${index === secilenTezIndeksi ? '<div style="color: #38a169; font-weight: bold;">‚úì Se√ßili</div>' : ''}
                    `;
                    
                    tezDiv.addEventListener('click', () => {
                        secilenTezIndeksi = index;
                        displayYokResults(result); // Yeniden √ßiz
                    });
                    
                    tezDiv.addEventListener('mouseenter', () => {
                        if (index !== secilenTezIndeksi) {
                            tezDiv.style.background = '#f8f9fa';
                            tezDiv.style.borderColor = '#5a67d8';
                        }
                    });
                    
                    tezDiv.addEventListener('mouseleave', () => {
                        if (index !== secilenTezIndeksi) {
                            tezDiv.style.background = 'white';
                            tezDiv.style.borderColor = '#e2e8f0';
                        }
                    });
                    
                    tezListDiv.appendChild(tezDiv);
                });
                
                resultsDiv.style.display = 'block';
            } else {
                tezListDiv.innerHTML = '<p style="color: #666;">Tez bulunamadƒ±.</p>';
                resultsDiv.style.display = 'block';
            }
        }
        
        // Geli≈ümi≈ü Arama Sonu√ßlarƒ±
        function displayYokAdvancedResults(result) {
            const fakeResult = {
                tezler: result.bulunan_tezler,
                bulunan_tez_sayisi: result.toplam
            };
            displayYokResults(fakeResult);
        }
        
        // Y√ñK Analiz Sonu√ßlarƒ±
        function displayYokAnalysis(result) {
            const analysisHtml = `
                <div style="background: #f0fff4; border: 1px solid #9ae6b4; border-radius: 8px; padding: 20px; margin-top: 20px;">
                    <h3 style="color: #22543d;">üìä Y√ñK Tez Analizi</h3>
                    
                    <div style="margin: 15px 0;">
                        <h4>üìö Tez Bilgileri:</h4>
                        <div style="background: white; padding: 15px; border-radius: 6px; margin: 10px 0;">
                            <strong>${result.tez_bilgileri.baslik}</strong><br>
                            <em>Yazar: ${result.tez_bilgileri.yazar} | ${result.tez_bilgileri.tur} | ${result.tez_bilgileri.yil}</em><br>
                            <small>√úniversite: ${result.tez_bilgileri.universite}</small>
                        </div>
                    </div>
                    
                    ${result.ozet_analizi.kisa_ozet ? `
                    <div style="margin: 15px 0;">
                        <h4>üìù √ñzet:</h4>
                        <div style="background: white; padding: 15px; border-radius: 6px;">
                            ${result.ozet_analizi.kisa_ozet}
                        </div>
                    </div>
                    ` : ''}
                    
                    ${result.ozet_analizi.anahtar_kelimeler && result.ozet_analizi.anahtar_kelimeler.length > 0 ? `
                    <div style="margin: 15px 0;">
                        <h4>üîë Anahtar Kelimeler:</h4>
                        <div class="keywords">
                            ${result.ozet_analizi.anahtar_kelimeler.map(kelime => `<span class="keyword">${kelime}</span>`).join('')}
                        </div>
                    </div>
                    ` : ''}
                    
                    <div style="margin-top: 15px; font-size: 0.9em; color: #666;">
                        <strong>Analiz Durumu:</strong> ${result.ozet_analizi.durum}<br>
                        <strong>Analiz Zamanƒ±:</strong> ${result.zaman}
                    </div>
                </div>
            `;
            
            // Sonu√ß b√∂l√ºm√ºn√ºn altƒ±na ekle
            const resultSection = document.getElementById('resultSection');
            if (resultSection.querySelector('.yok-analysis')) {
                resultSection.querySelector('.yok-analysis').innerHTML = analysisHtml;
            } else {
                const analysisDiv = document.createElement('div');
                analysisDiv.className = 'yok-analysis';
                analysisDiv.innerHTML = analysisHtml;
                resultSection.appendChild(analysisDiv);
            }
            
            resultSection.classList.add('show');
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Sayfa y√ºklendiƒüinde konsola bilgi yaz
        window.addEventListener('load', async () => {
            console.log('üéì T√ºrk√ße Tez √ñzetleyici y√ºklendi!');
            console.log('üìç API Base URL:', window.location.origin);
            console.log('üîç Y√ñK Tez entegrasyonu aktif!');
        });
    </script>
</body>
</html>
